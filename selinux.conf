# SELinux configuration for KChezmoi development container

# Allow container to access the workspace with Z mount flag
# The justfile uses :Z flag for SELinux labeling

# If you encounter SELinux issues during development, you may need to:
# 1. Check current context: ls -Z
# 2. Set appropriate context: sudo semanage fcontext -a -t container_file_t "/path/to/kchezmoi(/.*)?"
# 3. Restore context: sudo restorecon -R /path/to/kchezmoi

# For development, the :Z flag in podman run commands should handle most cases
# automatically by relabeling the mounted volume.

# If you need custom SELinux policies, create them here and apply with:
# sudo semodule -i kchezmoi-dev.pp

# Example policy module (kchezmoi-dev.te):
# module kchezmoi-dev 1.0;
# require {
#     type container_t;
#     type user_home_t;
#     class file { read write create };
# }
# allow container_t user_home_t:file { read write create };
